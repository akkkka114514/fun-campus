<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.akkkka.funcampusnotice.mapper.ActivityMapper">
    
    <resultMap type="Activity" id="ActivityResult">
        <result property="uid"    column="uid"    />
        <result property="title"    column="title"    />
        <result property="status"    column="status"    />
        <result property="position"    column="position"    />
        <result property="scoreCanGet"    column="score_can_get"    />
        <result property="enrollNumLimit"    column="enroll_num_limit"    />
        <result property="activitySchoolId"    column="activity_school_id"    />
        <result property="activityOrganizerId"    column="activity_organizer_id"    />
        <result property="deleted"    column="deleted"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectActivityVo">
        select uid, title, status, position, score_can_get, enroll_num_limit, activity_school_id, activity_organizer_id, deleted, create_time, update_time from activity
    </sql>

    <select id="selectActivityList" parameterType="Activity" resultMap="ActivityResult">
        <include refid="selectActivityVo"/>
        <where>  
            <if test="title != null  and title != ''"> and title = #{title}</if>
            <if test="status != null "> and status = #{status}</if>
            <if test="position != null  and position != ''"> and position = #{position}</if>
            <if test="scoreCanGet != null "> and score_can_get = #{scoreCanGet}</if>
            <if test="enrollNumLimit != null "> and enroll_num_limit = #{enrollNumLimit}</if>
            <if test="activitySchoolId != null  and activitySchoolId != ''"> and activity_school_id = #{activitySchoolId}</if>
            <if test="activityOrganizerId != null  and activityOrganizerId != ''"> and activity_organizer_id = #{activityOrganizerId}</if>
            <if test="deleted != null "> and deleted = #{deleted}</if>
        </where>
    </select>
    
    <select id="selectActivityByUid" parameterType="String" resultMap="ActivityResult">
        <include refid="selectActivityVo"/>
        where uid = #{uid}
    </select>

    <insert id="insertActivity" parameterType="Activity">
        insert into activity
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="uid != null">uid,</if>
            <if test="title != null and title != ''">title,</if>
            <if test="status != null">status,</if>
            <if test="position != null and position != ''">position,</if>
            <if test="scoreCanGet != null">score_can_get,</if>
            <if test="enrollNumLimit != null">enroll_num_limit,</if>
            <if test="activitySchoolId != null and activitySchoolId != ''">activity_school_id,</if>
            <if test="activityOrganizerId != null and activityOrganizerId != ''">activity_organizer_id,</if>
            <if test="deleted != null">deleted,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="uid != null">#{uid},</if>
            <if test="title != null and title != ''">#{title},</if>
            <if test="status != null">#{status},</if>
            <if test="position != null and position != ''">#{position},</if>
            <if test="scoreCanGet != null">#{scoreCanGet},</if>
            <if test="enrollNumLimit != null">#{enrollNumLimit},</if>
            <if test="activitySchoolId != null and activitySchoolId != ''">#{activitySchoolId},</if>
            <if test="activityOrganizerId != null and activityOrganizerId != ''">#{activityOrganizerId},</if>
            <if test="deleted != null">#{deleted},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateActivity" parameterType="Activity">
        update activity
        <trim prefix="SET" suffixOverrides=",">
            <if test="title != null and title != ''">title = #{title},</if>
            <if test="status != null">status = #{status},</if>
            <if test="position != null and position != ''">position = #{position},</if>
            <if test="scoreCanGet != null">score_can_get = #{scoreCanGet},</if>
            <if test="enrollNumLimit != null">enroll_num_limit = #{enrollNumLimit},</if>
            <if test="activitySchoolId != null and activitySchoolId != ''">activity_school_id = #{activitySchoolId},</if>
            <if test="activityOrganizerId != null and activityOrganizerId != ''">activity_organizer_id = #{activityOrganizerId},</if>
            <if test="deleted != null">deleted = #{deleted},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where uid = #{uid}
    </update>

    <delete id="deleteActivityByUid" parameterType="String">
        delete from activity where uid = #{uid}
    </delete>

    <delete id="deleteActivityByUids" parameterType="String">
        delete from activity where uid in 
        <foreach item="uid" collection="array" open="(" separator="," close=")">
            #{uid}
        </foreach>
    </delete>
</mapper>